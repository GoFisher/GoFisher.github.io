{
    "version": "https://jsonfeed.org/version/1",
    "title": "余心所善，九死未悔！ • All posts by \"6.配置免密码登录\" category",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2020/12/02/%E5%9C%A8%E7%BA%BF%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95/",
            "url": "http://example.com/2020/12/02/%E5%9C%A8%E7%BA%BF%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95/",
            "title": "6.配置免密码登录",
            "date_published": "2020-12-02T11:33:42.425Z",
            "content_html": "<h1 id=\"配置免密码登录\"><a class=\"anchor\" href=\"#配置免密码登录\">#</a> 配置免密码登录</h1>\n<p>SSH (Secure Shell) 是建立在 TCP/IP 协议的应用层和传输层基础上的安全协议。SSH 保障了远程登录和网络传输服务的安全性，起到了防止信息泄露等作用。通过 SSH 可以对文件进行加密处理，SSH 也可以运行于多平台，配置 SSH 无密码登录的步骤如下。</p>\n<h2 id=\"配置ssh无密码登录\"><a class=\"anchor\" href=\"#配置ssh无密码登录\">#</a> 配置 SSH 无密码登录</h2>\n<ul>\n<li>（1）使用 ssh-keygen 产生公钥与私钥对，输入命令 “ssh-keygen -t rsa”，接着按三次 Enter 键。<br />\n<figure class=\"highlight bash\"><figcaption><span>使用ssh-keygen产生公钥与私钥对</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh-keygen -t rsa</span></span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file <span class=\"keyword\">in</span> <span class=\"built_in\">which</span> to save the key (/root/.ssh/id_rsa): </span><br><span class=\"line\">Created directory <span class=\"string\">&#x27;/root/.ssh&#x27;</span>.</span><br><span class=\"line\">Enter passphrase (empty <span class=\"keyword\">for</span> no passphrase): </span><br><span class=\"line\">Enter same passphrase again: </span><br><span class=\"line\">Your identification has been saved <span class=\"keyword\">in</span> /root/.ssh/id_rsa.</span><br><span class=\"line\">Your public key has been saved <span class=\"keyword\">in</span> /root/.ssh/id_rsa.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">20:dc:3e:20:db:26:64:a9:7f:aa:9f:b5:80:aa:ae:d3 root@master</span><br><span class=\"line\">The key<span class=\"string\">&#x27;s randomart image is:</span></span><br><span class=\"line\"><span class=\"string\">+--[ RSA 2048]----+</span></span><br><span class=\"line\"><span class=\"string\">|                 |</span></span><br><span class=\"line\"><span class=\"string\">|   o .           |</span></span><br><span class=\"line\"><span class=\"string\">|  = + o          |</span></span><br><span class=\"line\"><span class=\"string\">| + + + .         |</span></span><br><span class=\"line\"><span class=\"string\">|. o o o S        |</span></span><br><span class=\"line\"><span class=\"string\">| o o   .         |</span></span><br><span class=\"line\"><span class=\"string\">|..o o            |</span></span><br><span class=\"line\"><span class=\"string\">|o E* .           |</span></span><br><span class=\"line\"><span class=\"string\">|O=+ .            |</span></span><br><span class=\"line\"><span class=\"string\">+-----------------+</span></span><br></pre></td></tr></table></figure><br />\n 生成私有密钥 id_rsa 和公有密钥 id_rsa.pub 两个文件。ssh-keygen 用来生成 RSA 类型的密钥以及管理该密钥，参数 “-t” 用于指定要创建的 SSH 密钥的类型为 RSA。<br />\n（2）用 ssh-copy-id 将公钥复制到远程机器中<br />\n <figure class=\"highlight bash\"><figcaption><span>用ssh-copy-id将公钥复制到远程机器中</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh-copy-id -i /root/.ssh/id_rsa.pub master</span></span><br><span class=\"line\">The authenticity of host <span class=\"string\">&#x27;master (192.168.146.171)&#x27;</span> can<span class=\"string\">&#x27;t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is 55:83:9a:cb:34:60:b6:ce:0f:03:39:dd:e9:fc:99:c4.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class=\"line\"><span class=\"string\">Warning: Permanently added &#x27;</span>master,192.168.146.171<span class=\"string\">&#x27; (RSA) to the list of known hosts.</span></span><br><span class=\"line\"><span class=\"string\">root@master&#x27;</span>s password: </span><br><span class=\"line\">Now try logging into the machine, with <span class=\"string\">&quot;ssh &#x27;master&#x27;&quot;</span>, and check <span class=\"keyword\">in</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">  .ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">to make sure we haven<span class=\"string\">&#x27;t added extra keys that you weren&#x27;</span>t expecting.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh-copy-id -i /root/.ssh/id_rsa.pub slave1</span></span><br><span class=\"line\">The authenticity of host <span class=\"string\">&#x27;slave1 (192.168.146.172)&#x27;</span> can<span class=\"string\">&#x27;t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is 55:83:9a:cb:34:60:b6:ce:0f:03:39:dd:e9:fc:99:c4.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class=\"line\"><span class=\"string\">Warning: Permanently added &#x27;</span>slave1,192.168.146.172<span class=\"string\">&#x27; (RSA) to the list of known hosts.</span></span><br><span class=\"line\"><span class=\"string\">root@slave1&#x27;</span>s password: </span><br><span class=\"line\">Now try logging into the machine, with <span class=\"string\">&quot;ssh &#x27;slave1&#x27;&quot;</span>, and check <span class=\"keyword\">in</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">  .ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">to make sure we haven<span class=\"string\">&#x27;t added extra keys that you weren&#x27;</span>t expecting.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh-copy-id -i /root/.ssh/id_rsa.pub slave2</span></span><br><span class=\"line\">The authenticity of host <span class=\"string\">&#x27;slave2 (192.168.146.173)&#x27;</span> can<span class=\"string\">&#x27;t be established.</span></span><br><span class=\"line\"><span class=\"string\">RSA key fingerprint is 55:83:9a:cb:34:60:b6:ce:0f:03:39:dd:e9:fc:99:c4.</span></span><br><span class=\"line\"><span class=\"string\">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class=\"line\"><span class=\"string\">Warning: Permanently added &#x27;</span>slave2,192.168.146.173<span class=\"string\">&#x27; (RSA) to the list of known hosts.</span></span><br><span class=\"line\"><span class=\"string\">root@slave2&#x27;</span>s password: </span><br><span class=\"line\">Now try logging into the machine, with <span class=\"string\">&quot;ssh &#x27;slave2&#x27;&quot;</span>, and check <span class=\"keyword\">in</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">  .ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">to make sure we haven<span class=\"string\">&#x27;t added extra keys that you weren&#x27;</span>t expecting.</span><br><span class=\"line\"></span><br><span class=\"line\">[root@master ~]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure><br />\n（3）验证是否设置无密码登录，在 master 虚拟机上进行测试<br />\n <figure class=\"highlight bash\"><figcaption><span>验证是否设置无密码登录</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh slave1</span></span><br><span class=\"line\">Last login: Mon Nov 23 00:58:04 2020 from 192.168.146.100</span><br><span class=\"line\">[root@slave1 ~]<span class=\"comment\"># exit   # 已经免密码登录slave1中，主机名已经发生变化</span></span><br><span class=\"line\"><span class=\"built_in\">logout</span></span><br><span class=\"line\">Connection to slave1 closed.</span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># ssh slave2</span></span><br><span class=\"line\">Last login: Mon Nov 23 01:04:19 2020 from 192.168.146.100</span><br><span class=\"line\">[root@slave2 ~]<span class=\"comment\"># exit</span></span><br><span class=\"line\"><span class=\"built_in\">logout</span></span><br><span class=\"line\">Connection to slave2 closed.</span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure></li>\n</ul>\n",
            "tags": [
                "大数据技术与应用",
                "Hadoop"
            ]
        }
    ]
}