{
    "version": "https://jsonfeed.org/version/1",
    "title": "余心所善，九死未悔！ • All posts by \"3.安装jdk及hadoop\" category",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2020/12/02/%E5%9C%A8%E7%BA%BF%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/%E5%AE%89%E8%A3%85JDK%E5%8F%8AHadoop/",
            "url": "http://example.com/2020/12/02/%E5%9C%A8%E7%BA%BF%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/%E5%AE%89%E8%A3%85JDK%E5%8F%8AHadoop/",
            "title": "3.安装Jdk及Hadoop",
            "date_published": "2020-12-02T11:32:25.816Z",
            "content_html": "<h1 id=\"安装jdk及hadoop\"><a class=\"anchor\" href=\"#安装jdk及hadoop\">#</a> 安装 Jdk 及 Hadoop</h1>\n<p>在 Linux 下安装 JDK 的步骤如下。</p>\n<ul>\n<li>（1）用 Xshell 软件的 Xft 将 JDK 安装包到上传到虚拟机 master，按 “Ctrl+Alt+F” 组合键，弹出文件传输框，把 jdk-7u79-linux-x64.tar.gz 上传到 /opt 目录下，如图 3-1 所示。</li>\n</ul>\n<p><img data-src=\"https://s3.ax1x.com/2020/11/22/DGQFSK.jpg\" alt=\"DGQFSK.jpg\" title=\"图3-1 jdk和hadoop软件上传\" /></p>\n<ul>\n<li>（2）进入 /usr 目录，建立文件夹 java，进入 /opt 目录，执行命令 “<strong>tar -zxvf  jdk-7u79-linux-x64.tar.gz -C /usr/java</strong>”，解压文件到 /usr/java 文件夹。<br />\n<figure class=\"highlight bash\"><figcaption><span>解压jdk软件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># cd /opt/</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 149916</span><br><span class=\"line\">-rw-r--r--. 1 root root 153512879 Nov 23 02:47 jdk-7u79-linux-x64.tar.gz</span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># cd /usr/</span></span><br><span class=\"line\">[root@master usr]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 64</span><br><span class=\"line\">dr-xr-xr-x.  2 root root 12288 Nov 23 01:44 bin</span><br><span class=\"line\">drwxr-xr-x.  2 root root  4096 Sep 23  2011 etc</span><br><span class=\"line\">drwxr-xr-x.  2 root root  4096 Sep 23  2011 games</span><br><span class=\"line\">drwxr-xr-x.  3 root root  4096 Nov 20 01:57 include</span><br><span class=\"line\">dr-xr-xr-x.  9 root root  4096 Nov 20 01:57 lib</span><br><span class=\"line\">dr-xr-xr-x. 24 root root 12288 Nov 20 01:58 lib64</span><br><span class=\"line\">drwxr-xr-x.  9 root root  4096 Nov 20 01:58 libexec</span><br><span class=\"line\">drwxr-xr-x. 12 root root  4096 Nov 20 01:56 <span class=\"built_in\">local</span></span><br><span class=\"line\">dr-xr-xr-x.  2 root root  4096 Nov 23 01:44 sbin</span><br><span class=\"line\">drwxr-xr-x. 61 root root  4096 Nov 20 01:58 share</span><br><span class=\"line\">drwxr-xr-x.  4 root root  4096 Nov 20 01:56 src</span><br><span class=\"line\">lrwxrwxrwx.  1 root root    10 Nov 20 01:56 tmp -&gt; ../var/tmp</span><br><span class=\"line\">[root@master usr]<span class=\"comment\"># mkdir java</span></span><br><span class=\"line\">[root@master usr]<span class=\"comment\"># cd /opt/</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># tar -zxvf jdk-7u79-linux-x64.tar.gz -C /usr/java/</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># cd /usr/</span></span><br><span class=\"line\">[root@master usr]<span class=\"comment\"># cd java/</span></span><br><span class=\"line\">[root@master java]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 4</span><br><span class=\"line\">drwxr-xr-x. 8 uucp 143 4096 Apr 11  2015 jdk1.7.0_79</span><br></pre></td></tr></table></figure></li>\n<li>（3）在 /etc/profile 添加<br />\n <figure class=\"highlight bash\"><figcaption><span>修改/etc/profile设置</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/java/jdk1.7.0_79</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure><br />\n 并执行 source /etc/profile 使配置生效<br />\n <figure class=\"highlight bash\"><figcaption><span>修改/etc/profile设置</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master java]<span class=\"comment\"># vi /etc/profile</span></span><br><span class=\"line\"><span class=\"comment\"># /usr/share/doc/setup-*/uidgid file</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$UID</span> -gt 199 ] &amp;&amp; [ <span class=\"string\">&quot;`id -gn`&quot;</span> = <span class=\"string\">&quot;`id -un`&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">umask</span> 002</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">umask</span> 022</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> /etc/profile.d/*.sh ; <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ -r <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"variable\">$&#123;-#*i&#125;</span>&quot;</span> != <span class=\"string\">&quot;$-&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">            . <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            . <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">unset</span> i</span><br><span class=\"line\"><span class=\"built_in\">unset</span> -f pathmunge</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/java/jdk1.7.0_79</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\">[root@master java]<span class=\"comment\"># source /etc/profile  # 使配置文件生效</span></span><br><span class=\"line\">[root@master java]<span class=\"comment\"># java -version  # 测试java安装成功</span></span><br><span class=\"line\">java version <span class=\"string\">&quot;1.7.0_79&quot;</span></span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.7.0_79-b15)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 24.79-b02, mixed mode)</span><br><span class=\"line\">[root@master java]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"安装hadoop\"><a class=\"anchor\" href=\"#安装hadoop\">#</a> 安装 Hadoop</h1>\n<p>（1）进入 /usr 目录，建立文件夹 hadoop，进入 /opt 目录，执行命令 “<strong>tar -zxvf  jdk-7u79-linux-x64.tar.gz -C /usr/java</strong>”，解压文件到 /usr/java 文件夹。</p>\n<p><figure class=\"highlight bash\"><figcaption><span>安装hadoop文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># cd /opt/</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 341280</span><br><span class=\"line\">-rw-r--r--. 1 root root 195257604 Dec  1 04:21 hadoop-2.6.0.tar_4.gz</span><br><span class=\"line\">-rw-r--r--. 1 root root 153512879 Dec  1 04:21 jdk-7u79-linux-x64.tar.gz</span><br><span class=\"line\">-rw-r--r--. 1 root root    614088 Dec  1 05:20 ntp-4.2.6p5-12.el6.centos.2.x86_64.rpm</span><br><span class=\"line\">-rw-r--r--. 1 root root     80736 Dec  1 05:20 ntpdate-4.2.6p5-12.el6.centos.2.x86_64.rpm</span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># mkdir /usr/hadoop/</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># tar -zxvf hadoop-2.6.0.tar_4.gz -C /usr/hadoop</span></span><br><span class=\"line\">[root@master opt]<span class=\"comment\"># cd /usr/hadoop/hadoop-2.6.0/</span></span><br><span class=\"line\">[root@master hadoop-2.6.0]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 56</span><br><span class=\"line\">drwxr-xr-x. 2 20000 20000  4096 Nov 14  2014 bin</span><br><span class=\"line\">drwxr-xr-x. 3 20000 20000  4096 Nov 14  2014 etc</span><br><span class=\"line\">drwxr-xr-x. 2 20000 20000  4096 Nov 14  2014 include</span><br><span class=\"line\">drwxr-xr-x. 3 20000 20000  4096 Nov 14  2014 lib</span><br><span class=\"line\">drwxr-xr-x. 2 20000 20000  4096 Nov 14  2014 libexec</span><br><span class=\"line\">-rw-r--r--. 1 20000 20000 15429 Nov 14  2014 LICENSE.txt</span><br><span class=\"line\">drwxr-xr-x. 2 root  root   4096 Dec  1 06:05 logs</span><br><span class=\"line\">-rw-r--r--. 1 20000 20000   101 Nov 14  2014 NOTICE.txt</span><br><span class=\"line\">-rw-r--r--. 1 20000 20000  1366 Nov 14  2014 README.txt</span><br><span class=\"line\">drwxr-xr-x. 2 20000 20000  4096 Nov 14  2014 sbin</span><br><span class=\"line\">drwxr-xr-x. 4 20000 20000  4096 Nov 14  2014 share</span><br><span class=\"line\">[root@master hadoop-2.6.0]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure></p>\n<p>（2) 修改 /etc/profile 文件，并配置环境变量，并测试 hadoop 是否成功安装<br />\n <figure class=\"highlight bash\"><figcaption><span>hadoop环境变量配置</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]<span class=\"comment\"># vi /etc/profile</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> /etc/profile.d/*.sh ; <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ -r <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"variable\">$&#123;-#*i&#125;</span>&quot;</span> != <span class=\"string\">&quot;$-&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">            . <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span></span><br><span class=\"line\">            . <span class=\"string\">&quot;<span class=\"variable\">$i</span>&quot;</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\">        <span class=\"keyword\">fi</span></span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">unset</span> i</span><br><span class=\"line\"><span class=\"built_in\">unset</span> -f pathmunge</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/java/jdk1.7.0_79</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$JAVA_HOME</span>/bin</span><br><span class=\"line\"><span class=\"built_in\">export</span> HADOOP_HOME=/usr/hadoop/hadoop-2.6.0  <span class=\"comment\"># 添加hadoop路径</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$HADOOP_HOME</span>/bin</span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># source /etc/profile</span></span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># hadoop version</span></span><br><span class=\"line\">Hadoop 2.6.0</span><br><span class=\"line\">Subversion https://git-wip-us.apache.org/repos/asf/hadoop.git -r e3496499ecb8d220fba99dc5ed4c99c8f9e33bb1</span><br><span class=\"line\">Compiled by jenkins on 2014-11-13T21:10Z</span><br><span class=\"line\">Compiled with protoc 2.5.0</span><br><span class=\"line\">From <span class=\"built_in\">source</span> with checksum 18e43357c8f927c0695f1e9522859d6a</span><br><span class=\"line\">This <span class=\"built_in\">command</span> was run using /usr/hadoop/hadoop-2.6.0/share/hadoop/common/hadoop-common-2.6.0.jar</span><br><span class=\"line\">[root@master ~]<span class=\"comment\"># </span></span><br></pre></td></tr></table></figure></p>\n<p>（3）修改 hadoop 配置文件，需要需改的配置文件（<strong>/hadoop 安装目录 /etc/hadoop</strong>），如下表格所示。</p>\n<div class=\"note info\">\n<ul>\n<li>\n<ol>\n<li>hadoop-env.sh 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>yarn-env.sh 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>core.site.xml 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"4\">\n<li>hdfs-site.xml 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"5\">\n<li>mapred-site.xml 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"6\">\n<li>yarn-site.xml 配置文件</li>\n</ol>\n</li>\n<li>\n<ol start=\"7\">\n<li>slaves 配置文件</li>\n</ol>\n</li>\n</ul>\n<div class=\"note info\">\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>配置文件名</th>\n<th>功能描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL2hhZG9vcC1lbnYuc2g=\">hadoop-env.sh</span></td>\n<td>配置 Hadoop 运行所需要的环境变量。</td>\n</tr>\n<tr>\n<td>2</td>\n<td><span class=\"exturl\" data-url=\"aHR0cDovL3lhcm4tZW52LnNo\">yarn-env.sh</span></td>\n<td>配置 YARN 运行所需的环境变量。</td>\n</tr>\n<tr>\n<td>3</td>\n<td>core.site.xml</td>\n<td>集群全局参数，用于定义系统级别的参数，如 HDFS URL、Hadoop 的临时目录等。</td>\n</tr>\n<tr>\n<td>4</td>\n<td>hdfs-site.xml</td>\n<td>HDFS 参数，如名称节点和数据节点的存放位置、文件副本的个数、文件读取的权限等。</td>\n</tr>\n<tr>\n<td>5</td>\n<td>mapred-site.xml</td>\n<td>MapReduce 参数，包括 Job History Server 和应用程序参数两部分，如 reduce 任务的默认个数、任务所能够使用内存的默认上下限等</td>\n</tr>\n<tr>\n<td>6</td>\n<td>yarn-site.xml</td>\n<td>集群资源管理系统参数，配置 ReourceManager、NodeManager 的通信端口，Web 监控端口等。</td>\n</tr>\n<tr>\n<td>7</td>\n<td>slave</td>\n<td>Hadoop 集群所有从节点主机名</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong><span class=\"exturl\" data-url=\"aHR0cDovL2hhZG9vcC1lbnYuc2g=\">hadoop-env.sh</span>：配置 Java 安装路径</strong></li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>hadoop-env.sh配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi hadoop-env.sh</span><br><span class=\"line\"># The only required environment variable is JAVA_HOME.  All others are</span><br><span class=\"line\"># optional.  When running a distributed configuration it is best to</span><br><span class=\"line\"># set JAVA_HOME in this file, so that it is correctly defined on</span><br><span class=\"line\"># remote nodes.</span><br><span class=\"line\"></span><br><span class=\"line\"># The java implementation to use.</span><br><span class=\"line\">export JAVA_HOME=/usr/java/jdk1.7.0_79  #修改的信息</span><br><span class=\"line\"></span><br><span class=\"line\"># The jsvc implementation to use. Jsvc is required to run secure datanodes</span><br><span class=\"line\"># that bind to privileged ports to provide authentication of data transfer</span><br><span class=\"line\"># protocol.  Jsvc is not required if SASL is configured for authentication of</span><br><span class=\"line\"># data transfer protocol using non-privileged ports.</span><br><span class=\"line\">#export JSVC_HOME=$&#123;JSVC_HOME&#125;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><strong><span class=\"exturl\" data-url=\"aHR0cDovL3lhcm4tZW52LnNo\">yarn-env.sh</span>：配置 Java 安装路径</strong></li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>yarn-env.sh配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi yarn-env.sh</span><br><span class=\"line\"># User for YARN daemons</span><br><span class=\"line\">export HADOOP_YARN_USER=$&#123;HADOOP_YARN_USER:-yarn&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># resolve links - $0 may be a softlink</span><br><span class=\"line\">export YARN_CONF_DIR=&quot;$&#123;YARN_CONF_DIR:-$HADOOP_YARN_HOME/conf&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\"># some Java parameters</span><br><span class=\"line\">export JAVA_HOME=/usr/java/jdk1.7.0_79 # 修改的内容</span><br><span class=\"line\">if [ &quot;$JAVA_HOME&quot; != &quot;&quot; ]; then</span><br><span class=\"line\">  #echo &quot;run java in $JAVA_HOME&quot;</span><br><span class=\"line\">  JAVA_HOME=$JAVA_HOME</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">if [ &quot;$JAVA_HOME&quot; = &quot;&quot; ]; then</span><br><span class=\"line\">  echo &quot;Error: JAVA_HOME is not set.&quot;</span><br><span class=\"line\">  exit 1</span><br><span class=\"line\">fi</span><br><span class=\"line\"></span><br><span class=\"line\">JAVA=$JAVA_HOME/bin/java</span><br><span class=\"line\">JAVA_HEAP_MAX=-Xmx1000m</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><strong>core.site.xml</strong></li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>core.site.xml文件配置</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi core-site.xml</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;fs.defaultFS&lt;/name&gt;  </span><br><span class=\"line\">      &lt;value&gt;hdfs://master:8020&lt;/value&gt;  </span><br><span class=\"line\">      &lt;/property&gt;  </span><br><span class=\"line\">    &lt;property&gt;</span><br><span class=\"line\">      &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class=\"line\">      &lt;value&gt;/var/log/hadoop/tmp&lt;/value&gt;</span><br><span class=\"line\">    &lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>\n<p><strong>hdfs-site.xml：数据目录</strong><br />\n <figure class=\"highlight text\"><figcaption><span>hdfs-site.xml配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi hdfs-site.xml</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;file:///data/hadoop/hdfs/name&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;file:///data/hadoop/hdfs/data&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">     &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</span><br><span class=\"line\">     &lt;value&gt;master:50090&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">     &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class=\"line\">     &lt;value&gt;3&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p><strong>mapred-site.xml ：需要拷贝之后再进行设置</strong></p>\n</li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>mapred-site.xml配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# cp mapred-site.xml.template mapred-site.xml</span><br><span class=\"line\">[root@master hadoop]# vi mapred-site.xml</span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;yarn&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;!-- jobhistory properties --&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;master:10020&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">     &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span><br><span class=\"line\">     &lt;value&gt;master:19888&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>**yarn-site.xml **</li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>yarn-site.xml配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi yarn-site.xml </span><br><span class=\"line\">&lt;configuration&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;master&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;    </span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8032&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8030&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8088&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.webapp.https.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8090&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8031&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;$&#123;yarn.resourcemanager.hostname&#125;:8033&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.local-dirs&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;/data/hadoop/yarn/local&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;true&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;/data/tmp/logs&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt; </span><br><span class=\"line\"> &lt;name&gt;yarn.log.server.url&lt;/name&gt; </span><br><span class=\"line\"> &lt;value&gt;http://master:19888/jobhistory/logs/&lt;/value&gt;</span><br><span class=\"line\"> &lt;description&gt;URL for job history server&lt;/description&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">   &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;false&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\"> &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span><br><span class=\"line\">    &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span><br><span class=\"line\">  &lt;/property&gt;</span><br><span class=\"line\">  &lt;property&gt;</span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;</span><br><span class=\"line\">      &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;</span><br><span class=\"line\">      &lt;/property&gt;</span><br><span class=\"line\">&lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;  </span><br><span class=\"line\">        &lt;value&gt;2048&lt;/value&gt;  </span><br><span class=\"line\"> &lt;/property&gt;  </span><br><span class=\"line\"> &lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;  </span><br><span class=\"line\">        &lt;value&gt;512&lt;/value&gt;  </span><br><span class=\"line\"> &lt;/property&gt;   </span><br><span class=\"line\"> &lt;property&gt;  </span><br><span class=\"line\">        &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt;  </span><br><span class=\"line\">        &lt;value&gt;4096&lt;/value&gt;  </span><br><span class=\"line\"> &lt;/property&gt; </span><br><span class=\"line\"> &lt;property&gt; </span><br><span class=\"line\">    &lt;name&gt;mapreduce.map.memory.mb&lt;/name&gt; </span><br><span class=\"line\">    &lt;value&gt;2048&lt;/value&gt; </span><br><span class=\"line\"> &lt;/property&gt; </span><br><span class=\"line\"> &lt;property&gt; </span><br><span class=\"line\">    &lt;name&gt;mapreduce.reduce.memory.mb&lt;/name&gt; </span><br><span class=\"line\">    &lt;value&gt;2048&lt;/value&gt; </span><br><span class=\"line\"> &lt;/property&gt; </span><br><span class=\"line\"> &lt;property&gt; </span><br><span class=\"line\">    &lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt; </span><br><span class=\"line\">    &lt;value&gt;1&lt;/value&gt; </span><br><span class=\"line\"> &lt;/property&gt;</span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li><strong>slave</strong></li>\n</ul>\n<p><figure class=\"highlight text\"><figcaption><span>slaves配置文件</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master hadoop]# vi slaves</span><br><span class=\"line\">#删除localhost，添加：</span><br><span class=\"line\">slave1</span><br><span class=\"line\">slave2</span><br></pre></td></tr></table></figure></p>\n</div>\n</div>\n",
            "tags": [
                "大数据技术与应用",
                "Hadoop"
            ]
        }
    ]
}